---
title: Manifest from Resources |Microsoft Docs
ms.date: 11/15/2016
ms.topic: conceptual
ms.assetid: 0234109b-5dcb-4d9d-acb9-a63f8bd5699c
caps.latest.revision: 5
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 4827402b63eadf517f031b04b7c7cf2fe8a4f56b
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/30/2020
ms.locfileid: "85537093"
---
# <a name="manifest-from-resources"></a>Manifest from Resources
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

Manifest from Resources 工具是一个控制台应用程序，它获取图像资源（.png 或 .xaml 文件）的列表并生成一个 imagemanifest 文件，该文件允许将这些图像与 Visual Studio 图像服务一起使用。 此外，此工具可用于将图像添加到现有的 imagemanifest。 此工具可用于将图像的高 DPI 和主题支持添加到 Visual Studio 扩展。 生成的 imagemanifest 文件应包含在中，并部署为 Visual Studio 扩展（.vsix）的一部分。  
  
## <a name="how-to-use-the-tool"></a>如何使用该工具  
 **语法**  
  
 ManifestFromResources/resources： \<Dir1> ; \<Img1> /assembly： \<AssemblyName>\<Optional Args>  
  
 **参数**  
  
|**交换机名称**|**备注**|**必需或可选**|  
|-|-|-|  
|/resources|以分号分隔的图像或目录的列表。 此列表应始终包含清单中将包含的映像的完整列表。 如果只提供了部分列表，则不包含的项将丢失。<br /><br /> 如果给定的资源文件是图像条，则该工具会将其拆分为单独的映像，然后将每个 subimage 添加到清单中。<br /><br /> 如果图像是 .png 文件，我们建议您将此名称设置为如下格式，以便该工具可以填充图像的正确属性： \<Name> ... \<Width> \<Height>png.|必需|  
|/assembly|托管程序集的名称（不包括扩展名），或承载资源的本机程序集的运行时路径（相对于清单的运行时位置）。|必需|  
|/manifest|要赋给生成的 imagemanifest 文件的名称。 这还可以包含在其他位置创建文件的绝对或相对路径。 默认名称与程序集名称匹配。<br /><br /> 默认值： \<Current Directory> \\<Assembly \> . imagemanifest|可选|  
|/guidName|要为生成的清单中的所有图像提供 GUID 符号的名称。<br /><br /> 默认值： AssetsGuid|可选|  
|/rootPath|需要在创建托管资源 Uri 之前去掉的根路径。 （此标志用于帮助处理错误的相关 URI 路径，从而导致资源无法加载。）<br /><br /> 默认值：\<Current Directory>|可选|  
|/recursive|如果设置此标志，则会告诉工具以递归方式搜索/resources 参数中的所有目录。 省略此标志将导致搜索顶级目录。|可选|  
|/isNative|如果程序集参数是本机程序集的路径，则设置此标志。 如果程序集参数是托管程序集的名称，则忽略此标志。 （有关此标志的其他信息，请参阅 "备注" 部分。）|可选|  
|/newGuids|如果设置此标志，则会告诉工具为映像 GUID 符号创建新值，而不是合并现有清单中的值。|可选|  
|/newIds|如果设置此标志，则会告诉工具为每个图像创建新的 ID 符号值，而不是合并现有清单中的值。|可选|  
|/noLogo|设置此标志将停止打印产品和版权信息。|可选|  
|/?|打印出帮助信息。|可选|  
|/help|打印出帮助信息。|可选|  
  
 **示例**  
  
- ManifestFromResources/resources： D:\Images/assembly：/isNative  
  
- ManifestFromResources/resources:D:\Images\Image1.png;D： \Images\Image1.xaml/assembly：：/manifest： MyImageManifest. imagemanifest  
  
- ManifestFromResources/resources:D:\Images\Image1.png;D： \Images\Image1.xaml/assembly：/guidName： MyImages/newGuids/newIds  
  
## <a name="notes"></a>备注  
  
- 该工具仅支持 .png 和 .xaml 文件。 任何其他图像或文件类型将被忽略。 对于分析资源时遇到的所有不支持的类型，将生成一个警告。 如果在工具完成对资源的分析后找不到支持的映像，则会生成错误  
  
- 通过遵循 .png 图像的建议格式，该工具会将 .png 的大小/维度值设置为格式指定的大小，即使该大小与图像的实际大小不同也是如此。  
  
- Png 图像的宽度/高度格式可以省略，但该工具会读取图像的实际宽度/高度，并使用图像的大小/维度值。  
  
- 在同一图像条带上多次运行此工具，以实现相同的 imagemanifest。该工具会尝试将图像条拆分为独立的映像，并将其添加到现有清单中。  
  
- 只应对工具生成的清单进行合并（忽略/newGuids 或/newIds）。 通过其他方式自定义或生成的清单可能无法正确合并。  
  
- 为本机程序集生成的清单可能需要在生成后进行手动编辑，使 ID 符号与本机程序集的 .rc 文件中的资源 Id 匹配。  
  
## <a name="sample-output"></a>示例输出  
 **简单图像清单**  
  
 图像清单将类似于以下 .xml 文件：  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<!-- This file was generated by the ManifestFromResources tool.-->  
<!-- Version: 14.0.15197 -->  
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">  
  <Symbols>  
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/Images" />  
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />  
    <ID Name="MyImage" Value="0" />  
  </Symbols>  
  <Images>  
    <Image Guid="$(AssetsGuid)" ID="$(MyImage)">  
      <Source Uri="$(Resources)/Xaml/MyImage.xaml" />  
      <Source Uri="$(Resources)/Png/MyImage.16.16.png">  
        <Size Value="16" />  
      </Source>  
    </Image>  
  </Images>  
  <ImageLists />  
</ImageManifest>  
```  
  
 **图像条的图像清单**  
  
 图像条的图像清单将类似于以下 .xml 文件：  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<!-- This file was generated by the ManifestFromResources tool.-->  
<!-- Version: 14.0.15197 -->  
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">  
  <Symbols>  
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/ImageStrip" />  
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />  
    <ID Name="MyImageStrip_0" Value="1" />  
    <ID Name="MyImageStrip_1" Value="2" />  
    <ID Name="MyImageStrip" Value="3" />  
  </Symbols>  
  <Images>  
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)">  
      <Source Uri="$(Resources)/MyImageStrip_0.png">  
        <Size Value="16" />  
      </Source>  
    </Image>  
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)">  
      <Source Uri="$(Resources)/MyImageStrip_1.png">  
        <Size Value="16" />  
      </Source>  
    </Image>  
  </Images>  
  <ImageLists>  
    <ImageList Guid="$(AssetsGuid)" ID="$(MyImageStrip)">  
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)" />  
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)" />  
    </ImageList>  
  </ImageLists>  
</ImageManifest>  
```  
  
 **本机程序集映像资源的图像清单**  
  
 本机映像的图像清单将类似于以下 .xml 文件：  
  
```xml  
<?xml version="1.0" encoding="utf-8"?>  
<!-- This file was generated by the ManifestFromResources tool.-->  
<!-- Version: 14.0.15198 -->  
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">  
  <Symbols>  
    <String Name="Resources" Value="..\Assembly\Folder\My.Assembly.Name" />  
    <Guid Name="AssetsGuid" Value="{442d8739-efde-46a4-8f29-e3a1e5e7f8b4}" />  
    <ID Name="MyImage1" Value="0" />  
    <ID Name="MyImage2" Value="1" />  
  </Symbols>  
  <Images>  
    <Image Guid="$(AssetsGuid)" ID="$(MyImage1)">  
      <Source Uri="$(Resources)">  
        <Size Value="16" />  
        <NativeResource ID="$(MyImage1)" Type="PNG" />  
      </Source>  
    </Image>  
    <Image Guid="$(AssetsGuid)" ID="$(MyImage2)">  
      <Source Uri="$(Resources)">  
        <Size Value="16" />  
        <NativeResource ID="$(MyImage2)" Type="PNG" />  
      </Source>  
    </Image>  
  </Images>  
  <ImageLists />  
</ImageManifest>  
```
