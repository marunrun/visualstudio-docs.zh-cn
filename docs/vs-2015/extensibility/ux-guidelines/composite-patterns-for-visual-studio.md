---
title: 复合模式
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-sdk
ms.topic: conceptual
ms.assetid: e48ecfb2-f4b5-4d3a-b4a2-7a4d62fa4ec0
caps.latest.revision: 9
ms.author: gregvanl
manager: jillfra
ms.openlocfilehash: 983a5d91fee40245f6a7d6877ccf38e666fa586e
ms.sourcegitcommit: d9254e54079ae01cdf2d07b11f988faf688f80fc
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/11/2020
ms.locfileid: "88114136"
---
# <a name="composite-patterns-for-visual-studio"></a>Visual Studio 的复合模式
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

复合模式将交互和设计元素组合到不同的配置中。 Visual Studio 中有关一致性的一些最重要的组合模式包括：

- [数据可视化](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_DataVisualization)

- [对象上的 UI 和扫视](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_OnObjectUI)

- [选择模型](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_SelectionModels)

- [持久性和保存设置](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_PersistenceAndSavingSettings)

- [触摸输入](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_TouchInput)

## <a name="data-visualization"></a><a name="BKMK_DataVisualization"></a>数据可视化

### <a name="overview"></a>概述
 图表是聚合和可视化数据的一种直观方法，目的是为了增强决策。 它们可以帮助用户面对大量数据，但很少意味着需要注意哪些情况，以及可能需要采取措施。

 如果满足以下任一条件，则用户将受益于图表：

- 图表是否会帮助用户确定他们可以操作的任务？

- 此图表是否允许用户预测潜在更改的后果？

- 图表将帮助用户发现趋势并确定模式吗？

- 此图表是否允许用户做出更好的决策？

- 图表是否有助于回答用户在给定的上下文中可能会遇到的特定问题？

#### <a name="general-rules-for-charts"></a>图表一般规则

- 清楚地标记数据。 没有说明的插图只是一张图片。

- 从零开始轴以避免倾斜比例。 行长度和条形大小是了解数据点之间关系的重要视觉提示。

- 创建图表，而不是信息图。 信息图是数据的艺术表示形式，其主要目标是 visual 故事分享。 图表可以 (，并且应) 有吸引力，但会让数据对自己有吸引力。

- 避免 skeumorphism、图形条形图、对比度井号标记和其他信息图接触。

- 不要使用三维效果作为装饰元素。 仅当它们确实是用户理解信息的能力时才使用它们。

- 避免使用多行和填充，因为两种以上的颜色可以使此类图表难以正确读取和解释。

- 请勿使用图表 (或任何图) 作为理解概念或与数据进行交互的唯一方法。 这会给视力障碍的用户带来麻烦。

- 请勿在页面上使用图表作为免费或装饰元素。 换句话说，如果图表不会添加任何值，或者不能帮助用户解决问题，请不要使用它。

### <a name="chart-types"></a>图表类型
 在 Visual Studio 中使用的图表类型包括条形图、折线图、称为圆圈的已修改饼图或 "圆环图"、"圆环图"、"散点图" (也称为 "分类图表" ) 和甘特图。 每种类型的图表都适用于传达不同类型的信息。

### <a name="other-charting-considerations"></a>其他图表注意事项

#### <a name="color"></a>颜色
 为在 Visual Studio 中使用而定义的图表颜色有特定的调色板。 可以访问调色板的主要类型色盲，即使使用的是颜色非常窄的切片，颜色也可以区分。 你可以在 UI 中的任何类型的图表或图形的任意组合中使用这些颜色。 如果不需要许多不同的颜色，则无需使用全部七种颜色。 这些颜色并未设计为与任何前景元素一起使用，因此不会将文本或标志符号放置在这些颜色的顶部。 这些色相应进行硬编码并公开给 "**工具" > 选项**下的用户自定义 (请参阅[公开最终用户) 的颜色](../../extensibility/ux-guidelines/colors-and-styling-for-visual-studio.md#BKMK_ExposingColorsForEndUsers)。

|样板|Hex|RGB|
|------------|---------|---------|
|![样本 71B252](../../extensibility/ux-guidelines/media/0711-71b252.png "0711_71B252")|#71B252|113178，82|
|![样本 BF3F00](../../extensibility/ux-guidelines/media/0711-bf3f00.png "0711_BF3F00")|#BF3F00|191，63，0|
|![样本 FCB714](../../extensibility/ux-guidelines/media/0711-fcb714.png "0711_FCB714")|#FCB714|252183，20|
|![样本 903F8B](../../extensibility/ux-guidelines/media/0711-903f8b.png "0711_903F8B")|#903F8B|144，63139|
|![样本 117AD1](../../extensibility/ux-guidelines/media/0711-117ad1.png "0711_117AD1")|#117AD1|17122209|
|![样本 79D7F2](../../extensibility/ux-guidelines/media/0711-79d7f2.png "0711_79D7F2")|#79D7F2|121215242|
|![样本 B5B5B5](../../extensibility/ux-guidelines/media/0711-b5b5b5.png "0711_B5B5B5")|#B5B5B5|181181181|

## <a name="on-object-ui-and-peeking"></a><a name="BKMK_OnObjectUI"></a>对象上的 UI 和扫视
 本部分提供上下文以扫视（也称为代码查看视图），这是 Visual Studio 独有的对象类型的 UI。

### <a name="overview"></a>概述

- 对象上的 UI 应为用户的主任务指定更多的信息或交互性，而无需 detracting。

- Visual Studio 中的对象上 UI 的主要模式称为 "信息在注意"。

- Visual Studio 中的对象上 UI 可以是内联的或浮动的，也可以是持久的或暂时性的。

  - 在 Visual Studio 中，代码查看视图是一种类型的对象上 UI，是内联的且持久的。

  - CodeLens 是 Visual Studio 中对象的一种类型，它是浮动的和暂时性的

  了解一段代码的工作原理或查找有关该代码的详细信息，通常要求开发人员切换上下文，然后转到其他内容或其他窗口。 这些上下文转移可能会造成中断，因为用户离开其主窗口时，可能会失去其原始任务的焦点。 而且，使原始上下文恢复起来可能很困难，尤其是在切换 windows 导致其原始代码被其他 UI 遮盖的情况下。

  对象上的 UI 遵循名为 "信息" 的问题。 这些消息、弹出窗口和对话框为用户添加了附加的相关信息，这些信息可添加澄清或交互性，而不会影响其主要任务。 对象上 UI 的示例包括在用户将指针悬停在通知区域中的图标时显示的弹出窗口、拼写错误的单词下的红色波形曲线和 Visual Studio 2013 中引入的 "速览" 视图。

### <a name="decision-points"></a>决策点
 在 Visual Studio 中，有几种方法可在关注点使用此模式信息。 选择适当的机制并以一致且可预测的方式实现，这对于总体体验而言至关重要。 否则，用户可能会遇到令人困惑或不一致的体验，影响内容本身。

#### <a name="relationships-between-master-and-detail-content"></a>大纲和详细内容之间的关系
 需要注意的信息用于显示用户重点关注的内容之间的关系 ("主要" 内容) 以及 "详细信息" 内容)  (的其他相关内容。 在此模式下，详细信息内容与用户使用的内容有明显的关系，并可显示到与主内容接近的内容。 不能对主内容进行汇总的补充信息或信息应遵循其他模式，如工具窗口。

- **始终**显示与主内容接近的详细内容。

- 请**始终**确保详细信息内容仍允许用户保持对主内容的关注。 通常，实现此目的的最佳方式是尽可能将详细信息内容呈现到主内容。 为此，可以在主内容旁的弹出窗口中呈现详细信息内容，也可以通过在主内容下方以内联方式呈现详细信息内容来完成。

- **永远不要**使用信息来使用户离开主内容。 如果用户需要单独查看详细信息内容，则会公开显式操作，使用户能够执行此操作。

#### <a name="design-details"></a>设计详细信息
 确定对象上的 UI 是正确的选择后，有四个主要的设计注意事项：

1. **持久性：** 内容应为持久内容还是暂时性内容？
   用户是否希望将信息显示为引用或与之进行交互？ 或者，用户是否想要快速浏览相关信息，然后继续执行主要任务？

2. **内容类型：** 内容是否为信息性、可操作或导航？
   用户是否需要有关主内容的更多详细信息？ 用户是否需要完成影响主内容的任务？ 还是需要将用户定向到另一资源？

3. **指示器类型：** 环境指示器是否有意义？
   该信息是否可以通过有用的方式进行汇总并显示，而不会使主内容出现困难？

4. **手势：** 将使用哪些手势来调用和取消 UI？
   用户如何打开详细信息内容并将其发送出去？ 添加笔势（如固定以便在暂时性状态和持久状态之间切换）是否存在价值？

   这四个决策点都将影响对象上 UI 的主要组件。

### <a name="on-object-ui-components"></a>对象上 UI 组件

1. 容器 (内容表示器) 类型

    - 浮动

    - 内联

2. 内容类型

    - 信息：可能是静态或动态的数据

    - 可操作：更改主内容的命令

    - 导航：使用户转到其他窗口或应用程序（如 MSDN）的链接

3. 手势

    - 调用

    - 消除

    - 固定

    - 其他交互

4. 持久性和提交模型

    - 暂时

    - Durable

    - 自动

    - 按需

5. 环境指示器 (可选) 

    - 波浪下划线

    - 智能标记图标

    - 其他环境指示器

#### <a name="container-content-presenter-type"></a>容器 (内容表示器) 类型
 有两个主要选项可用于在关注点显示内容：

1. **Inline：** 内联表示器（如 Visual Studio 2013 代码编辑器中引入的 "速览" 视图）通过改变现有内容来为新内容提供空间。

    - 如果希望用户需要花费大量时间来引用您所提供的内容或与您的内容交互，则**最好使用**内联演示者。

    - 如果希望用户希望一目了然地显示所显示的信息，请**避免**内嵌演示者，并在中断时继续执行其主要任务。

2. **浮动：** 浮动表示器将尽可能靠近所选内容，但不会改变现有内容的布局。 可以采用各种策略，例如，将浮动内容面板显示到所选符号的最接近可用的空白区域。

    - 如果希望用户希望一目了然地显示所显示的信息，则**最好**使用浮动演示者，并在中断时继续执行主要任务。

    - 如果希望用户需要花费大量时间来引用所显示的内容或与之进行交互，请**避免**浮动演示者。

#### <a name="content-type"></a>内容类型
 有三种主要类型的内容可在任何对象内 UI 容器中显示。 可以显示这些类型信息的任意组合。 这三种类型是：

1. **信息：** 大多数对象上的 UI 容器将显示某些类型的信息性内容。 该内容可以表示有关环境的当前状态的信息，也可以表示有关环境的可能未来状态的信息。 例如，它可用于显示对现有代码的特定命令的影响，如重构。

    - **始终**使用显示的信息的规范表示形式。 例如，代码应类似于代码，完成语法突出显示，并且应遵守用户设置的任何字体和其他环境设置。

    - 应**始终**考虑对信息性内容的任何操作进行支持，如果这些信息显示为 "主内容"，则可能会出现这种情况。 例如，如果在对象内 UI 容器内显示现有代码，则强烈考虑支持浏览和修改该代码。

    - 如果提供的信息性内容表示可能的未来状态，请**务必**考虑使用不同的背景色。

2. 可操作：某些对象上 UI 容器将提供对主内容执行某些操作（如执行重构操作）的功能。

    - **始终**将可操作的命令与信息性内容分开。

    - **应始终**启用和禁用操作（如果适用）。

    - 请**始终**参阅表示对话框内的命令的标准指导原则。

    - **始终**将对象内 UI 容器中公开的操作的数量保持为绝对最小值。 与对象上 UI 交互应为轻量的快速体验。 用户不必展开能量来管理对象 UI 容器本身。

    - **始终**考虑何时关闭或消除对象上 UI 容器的方式和时间。 作为最佳做法，在主内容和详细内容之间完成对话框的任何操作都应在调用该操作时关闭对象 UI 容器。

3. **导航：** 某些对象上的 UI 容器包括将用户转到其他窗口或应用程序的链接，例如在用户的 web 浏览器中打开 MSDN 文章。

    - **始终**在任何导航链接前面添加 "打开"，以便用户在导航到其他内容时不会感到惊讶。

    - **始终**将导航链接从可操作的链接中分离出来。

#### <a name="ambient-indicators-optional"></a>环境指示器 (可选) 
 环境指示器可能比较微妙，其中包括从代码的其余部分以对比颜色显示的文本，或明显的情况，包括 tickler 符号（如波形下划线和智能标记图标）。 环境指示器传达其他相关信息的可用性。 理想情况下，它们提供有用的信息，甚至无需用户与之交互。

- **始终**定位环境指示器，使其不会打乱或影响用户。 如果无法以这种方式定位环境指示器，请考虑另一种解决方案。

- **始终**将环境指示器尽可能靠近与其相关的内容。

- **始终**尝试创建一个指示器，用于汇总它所提供的信息。 请考虑提供可用数据项数的计数 (例如，"3 引用" 而不是 "引用" ) 或考虑其他一些汇总数据的方式。

  - 如果无法始终计算和显示指示器的数据，则立即考虑在计算值时提供渐进式反馈。 例如，请考虑对反映可用数据更新的动画进行动画处理，这类似于 "电子邮件动态磁贴的 Windows Phone 刷新方式"，因为未读电子邮件的数量会增加。

- **绝不**要添加比用户可合理进入给定内容段的更多指标。 环境指示器在无需用户交互的情况下非常有用。 如果指示器需要溢出和其他管理控件来使它们进入查看，则指示器会丢失其环境。

#### <a name="gestures"></a>手势
 允许用户保持对主内容的关注的一个关键方面是支持打开和关闭其他详细信息内容的正确手势。

- **始终**要求用户执行一些显式手势，以打开其他内容。 常见的开放手势包括：

  - **悬停：** 工具提示或非交互式信息性内容

  - **Explicit 命令：** 内联呈现器

  - **双击环境指示器：** CodeLens 弹出窗口

- **始终**在用户按 Esc 键时关闭详细信息内容。

- **始终**考虑对象上 UI 的上下文。 对于允许在容器中交互的内容提供者，请仔细考虑是否显示悬停的其他信息，这可能会破坏用户的工作流。

- **永远不**会显示悬停上显示为可编辑或邀请用户交互的内容。 如果用户尝试将光标移到详细信息内容上，则此行为可能会使用户不快，因为工具提示的标准行为会立即在光标不再位于生成它的主内容上时关闭。

## <a name="selection-models"></a><a name="BKMK_SelectionModels"></a>选择模型

### <a name="overview"></a>概述
 选择模型是一种机制，用于指示和确认在用户界面中感兴趣的一个或多个对象上的操作。 本主题讨论 Visual Studio 文档编辑器中的选择交互模式：文本编辑器、设计图面和建模图面。

 用户必须有一种方法来指示 Visual Studio 正在处理的内容，并且 Visual Studio 必须使用反馈向用户提供有关其运行内容的反馈。 用户与用户界面之间的差异或畅可能导致用户不会注意到操作，这可能会产生意想不到的后果。 通常情况下，错误会被忽略，直到用户发现某些内容丢失或更改。 因此，选择模型是最关键的用户界面设计部分之一。 尽管 Visual Studio 中的选择模型与 Windows 一致，但有一些变化。

 在 Visual Studio 中，与在 Windows 中一样，选择模型因发生交互的上下文而异。 可以在四种类型的对象中进行选择：

- 文本

- 图形对象

- 列表和树

- 网格

  在这些对象中，有三种类型的选择：

- 系列

- 相互

- 区域

#### <a name="scope"></a>范围
 最重要的选择组件是确保用户知道他们在哪个窗口中工作 (激活) 并将焦点置于 (选择) 。 Visual Studio 扩展了 Windows 中的窗口管理功能，但激活方案相同：与窗口交互会将焦点放在窗口中。 Visual Studio 具有两个用于激活的指示器：一个用于文档窗口，一个用于工具窗口。

 对于文档窗口，活动窗口由一个文档窗口选项卡指示，并更改其背景色：

 ![Visual Studio 中的“活动”选项卡选择](../../extensibility/ux-guidelines/media/0713-01-activetab.png "0713-01_ActiveTab")

 **活动选项卡选择**

 对于工具窗口，活动窗口的显示方式为工具窗口标题栏区域的颜色更改：

 ![Visual Studio 中的”活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-02-activetoolwindow.png "0713-02_ActiveToolWindow")

 **显示节点的主要选择的活动工具窗口**

 ![Visual Studio 中的”非活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-03-inactivetoolwindow.png "0713-03_InactiveToolWindow")

 **显示延迟的节点选择的非活动工具窗口**

 窗口处于活动状态后，将根据指导原则的此部分中所述的选择模型来指示其焦点。

#### <a name="context"></a>上下文
 Visual Studio 旨在保持上下文的强大概念，同时跟踪用户的工作位置。 只有一个窗口处于活动状态，无论该窗口是工具窗口还是文档窗口。 但是，最顶部的文档窗口始终保留潜在的选择。 尽管焦点可能位于工具窗口中，但最后一个活动的文档窗口也会显示选定内容，即使处于非活动状态也是如此。 这样做是为了在他们正在编辑的文档中保留用户的上下文，并显示 Visual Studio 已保留其状态，以便能够在工具窗口和文档窗口之间无缝返回和切换。

### <a name="text-selection"></a>文本选择
 严格采用文本形式的 Visual Studio 编辑器（例如内置文本编辑器）使用 MSDN 上 Windows 用户体验交互准则的 "[鼠标和指针](https://msdn.microsoft.com/library/dn742466.aspx)" 页中所述的相同文本选择模型和外观。 文本编辑器中的输入焦点由称为插入点的竖线指示。 插入点为一个像素，并着色为它后面显示的任何内容。 它根据 "控制面板" 中 "**键盘**" 小程序的 "**速度**" 选项卡中 "**游标闪烁速率**" 设置的速率闪烁。

#### <a name="contiguous-and-disjoint-selection"></a>连续和非连续选择
 文本编辑器中的选择仅是连续的。 不允许不连续的文本选择，但应在图形对象编辑器中解决。 当用户的鼠标指针位于文本区域时，光标将更改为 I 型。 单击一次即可将插入点放置在文本编辑器中的单击位置。 按住鼠标按钮会启动选择突出显示，然后松开鼠标按钮将结束选择突出显示。

#### <a name="region-selection-box-selection"></a>选择区域 () 选择
 Visual Studio 支持在文本编辑器中选择区域，这称为框选择。 框选择允许用户选择不在常规文本流之后的文本区域。 与标准文本选择一样，选择必须是连续的。 通过在用鼠标拖动时按住 Alt 键来启动框选择。 还可以通过在使用箭头键指示所选区域的同时按住 Alt 和 Shift 键来启动框选择。 框选择使用正常选择突出显示，并显示插入点光标在选择区域结束时的闪烁。

 ![Visual Studio 中的 "区域 &#40;" 框&#41; 选择](../../extensibility/ux-guidelines/media/0713-04-boxselection.png "0713-04_BoxSelection")

 **Visual Studio 中的 "区域 (" 框) 选择**

#### <a name="text-selection-appearance"></a>文本选择外观
 可以自定义在编辑器中用于活动和非活动选择的颜色。 若要自定义编辑器的视觉外观，用户可以 **> 选项**中转到 "工具"，然后在 "**环境" > "字体和颜色" > 文本编辑器**"下查看。

### <a name="graphical-selection"></a>图形选择

#### <a name="interaction"></a>交互
 图形对象选择可能很复杂，具体取决于多个因素：

- **编辑器的主选择模型。** 包含图形对象的编辑器还可以用于编辑文本或网格。 例如，编辑器可能是基于文本的编辑器，还支持图形对象（如 Visual Studio XAML 设计器）的位置。 支持多个对象类型可能会影响用户选择由不同类型的对象组成的组的方式。

- **支持主要和次要选择状态。** 编辑器可以提供主选择状态和辅助选择状态，以便可以统一、彼此对齐、调整对象大小等来编辑对象。

- **就地编辑支持。** 编辑器还可以允许编辑其图形对象的内容。 例如，矩形形状还可能在可由用户更改的内部包含文本。 此外，该文本可以居中或两端对齐。 就地编辑涉及更详细的用户交互级别，因此需要一组适当的视觉提示来向用户展示状态信息。

#### <a name="mouse-interaction"></a>鼠标交互

|输入|结果|
|-----------|------------|
|单击未选定的对象|如果对象可调整大小，则选择对象并显示虚线和选择控点。|
|单击所选对象|如果对象支持，则激活就地编辑。 单击对象外部将停用就地编辑模式。|
|双击对象|打开要编辑的对象的代码，并根据需要插入默认事件处理程序。|
|指向对象|将指针更改为移动光标。 对象的外观（如其发光度或颜色）可能会更改。|
|指向选择句柄|将指针更改为大小调整光标。 对于支持旋转的对象，当指针定位在不同的位置时，某些选择控点可能会将指针更改为旋转光标 (例如，与选择控点相对) 。|
|拖动|即使之前没有选择对象，也会将指针更改为移动光标并移动对象。|
|编辑器失去焦点|停用就地编辑模式，尽管对象会保留其在上一个操作/选择状态中所具有的内容和外观。|
|对象选择|由边框、点线或其他直观不同处理指示，以突出显示对象的边界。|
|调整所选对象的大小|由选择句柄指示。<br /><br /> 可调整大小的对象具有八个句柄，表示可调整其大小的每个方向。 如果只能在某些方向调整对象的大小，则可以使用较少的句柄。 如果用户将对象大小减小到八个句柄不是交互的位置，则可以使用四个句柄。 句柄大小应与窗口边框和边缘指标绑定， **GetSystemMetrics** API 函数与显示分辨率成比例。<br /><br /> ![重设句柄大小](../../extensibility/ux-guidelines/media/0713-05-resizehandles.png "0713-05_ResizeHandles")|
|旋转所选对象|![旋转句柄](../../extensibility/ux-guidelines/media/0713-06-rotate.png "0713-06_Rotate")|

#### <a name="keyboard-interaction"></a>键盘交互

|输入|结果|
|-----------|------------|
|选项卡|在编辑器中的对象的逻辑顺序中移动焦点指示器。 这可以从左到右或从上到下，具体取决于**TabIndex** (或等效的) 属性值、对象创建顺序以及编辑器的总体用途。 Shift + Tab 反转焦点指示器的方向。|
|空格键|保持击键时，激活平移模式。 平移视区位置需要额外的鼠标输入。|
|Ctrl+空格键|保持击键时，激活缩放模式。 需要额外的鼠标输入才能增加和减少缩放系数。|
|Ctrl + Alt + 减号|将缩放因子降低一个级别。|
|Ctrl + Alt + 加号|将缩放因子增加一个级别。|
|Shift 或 Ctrl|将对象添加到选择组。 Ctrl 还允许从选择组中单独删除对象。|
|Enter|对对象执行默认命令 (通常打开或编辑) 。|
|F2|激活对象的就地编辑。|
|箭头键|按按下箭头键的方向 (s) 移动所选对象，以较小增量 (例如，一次一个像素) |
|Ctrl + 箭头键|按按下箭头键的方向 (s) 移动所选对象，更大的增量 (例如，一次10个像素) |
|Shift + 箭头键|以较小的增量调整所选对象 (s) 的大小， (例如，一次一个像素) |
|Ctrl + Shift + 箭头键|将所选对象的大小调整 (s 方向，以较大增量 (例如，一次) 10 个像素) |

 当用户就地编辑控件时，对象可以通过用户输入自动调整大小。 例如，如果用户编辑 "标签" 控件，则标签应增长以显示用户刚刚键入的文本。 如果未执行此操作，用户必须在编辑文本后手动调整控件的大小。 如果用户有很多控件，这就成为了 rote 和产生效益等待任务。

#### <a name="graphical-containers"></a>图形容器
 在某些情况下，图形编辑器在 HTML 设计器中为其他图形对象（如 Windows 窗体面板控件或网格布局控件）提供容器。 如果编辑器为其他图形对象提供容器，则以下选择模型仅适用于容器 (容器中的对象应遵循上述标准模型) ：

|输入|结果|
|-----------|------------|
|单击容器|选择容器对象，无需直接选择任何包含的对象。 可以通过标准鼠标和键盘输入来移动和/或调整容器大小 (如上所述) 。 与容器相关的移动包含对象，但不会调整包含的对象的大小，除非也直接选择它们。|
|将鼠标悬停在容器的边界区域之上|将鼠标变为移动光标，表示容器可以移动。|
|拖动容器的边界区域|将鼠标更改为移动光标，并在) 中移动容器 (和包含的对象。 只需单击一次，即可移动容器。|
|单击容器中的对象|取消选择容器 (如果选中) 并仅选择单击的对象。|
|Shift + 单击或 Ctrl + 单击包含的对象和/或容器|将单击的对象添加到现有选择或选择组。 如果单击的对象已经是选择组的成员，则会将其从选择组中删除。|

 所包含的对象应遵循上一节中所述的基本选择模型。 从 Windows 窗体设计器的可用性测试中，用户需要无缝访问包含的对象，而无需介入 (包含对象) 施加的步骤。

#### <a name="disjoint-and-region-selections"></a>无交集和区域选择
 图形对象编辑器应该支持不连续选择。 请注意，此图形不显示 Visual Studio 的控件外观。 有关详细的视觉规范，请参阅[图形对象选择外观](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_GraphicalObjectSelectionAppearance)。

 ![非连续选择器和区域选择器](../../extensibility/ux-guidelines/media/0713-07-disjointregionselectors.png "0713-07_DisjointRegionSelectors")

 **不连续选择**

 图形编辑器还应使用天棚类型选择指示器来提供区域选择。 如果图形编辑器支持 (如文本) 的其他对象类型，则可能无法选择区域，具体取决于这些其他对象类型的限制。

 ![字幕选择](../../extensibility/ux-guidelines/media/0713-08-marqueeselection.png "0713-08_MarqueeSelection")

 **字幕选择**

#### <a name="primary-and-secondary-selections"></a>主要和次要选择
 某些图形对象编辑器允许用户编辑或对齐组中的对象。 在这种情况下，需要引入主要和次要选择的概念。 主选择是所有其他对象对其进行组操作响应的对象。 用户首先选择的对象将成为主控件，后续选择将成为辅助选择。 主选择具有不同于次要选择的视觉对象处理 (s) 来指示哪个对象是主要对象：

 ![主要和次要选择](../../extensibility/ux-guidelines/media/0713-09-primarysecondary.png "0713-09_PrimarySecondary")

 **具有两个次要选择的主要选择**

#### <a name="graphical-object-selection-appearance"></a><a name="BKMK_GraphicalObjectSelectionAppearance"></a>图形对象选择外观
 选择控点是围绕对象的边界框围绕矩形模式绘制的正方形。 下图显示了图形对象可以具有的处理、调整大小和就地编辑外观的各种状态的示例。 应使用**GetSystemMetrics** API 将句柄的大小绑定到窗口边框和边缘指标。

|          状态          |  外观   |                                                                  视觉对象详细信息                                                                  |
|-------------------------|---------------|--------------------------------------------------------------------------------------------------------------------------------------------------|
|     **未选定**      |    默认    |                 ![默认按钮状态](../../extensibility/ux-guidelines/media/0713-10-defaultstate.png "0713-10_DefaultState")                 |
|  **主要选择**  |   改变   |       ![具有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-11-primaryresize.png "0713-11_PrimaryResize")        |
|  **主要选择**  | 不可调整大小 |    ![没有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-13-primarynoresize.png "0713-13_PrimaryNoResize")    |
|  **主要选择**  |    已锁定     |              ![锁定的主要选择](../../extensibility/ux-guidelines/media/0713-15-primarylocked.png "0713-15_PrimaryLocked")              |
| **辅助选择** |   改变   |    ![具有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-17-secondaryresize.png "0713-17_SecondaryResize")     |
| **辅助选择** | 不可调整大小 | ![没有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-19-secondarynoresize.png "0713-19_SecondaryNoResize") |
| **辅助选择** |    已锁定     |           ![锁定的次要选择](../../extensibility/ux-guidelines/media/0713-21-secondarylocked.png "0713-21_SecondaryLocked")           |
|      **UI 处于活动状态**      |    默认    |                       ![UI 活动状态](../../extensibility/ux-guidelines/media/0713-23-uiactive.png "0713-23_UIActive")                        |

### <a name="view-selection-models"></a>查看选择模型

#### <a name="tree-view"></a>树视图
 树视图中的选择会显示一个简单的突出显示。 如果用户单击节点名称或节点图标，则该节点将变为选中状态。 节点左侧的三角标志符号展开或收缩树控件，但不影响用户的选择，但有一种例外情况：在所选内容位于该节点的子节点上时折叠父节点时，所选内容将移至父节点。

 ![Visual Studio 中的典型树视图](../../extensibility/ux-guidelines/media/0713-25-treeview.png "0713-25_TreeView")

 **Visual Studio 中的典型树视图**

 树视图可以支持连续和不连续的选择，甚至可以在树中的多个级别上进行。 必须在可见树节点上执行连续或非连续多选。 如果某个节点处于折叠状态，则不连续的选定内容将丢失，并且已折叠的节点会获得所选内容。 这样，用户就可以看到将受操作影响的节点。 节点折叠后，可能会影响哪些节点。

 如果选择了父节点，则操作应应用于父节点，不过，在某些情况下，操作需要应用于父节点及其所有子节点。 在这种情况下，在操作过程中提供附加的 UI，如复选框或确认对话框，以使 "应用于所有子级" 选项对用户明确。

##### <a name="renaming"></a>重命名
 如果树中的节点支持重命名，则应就地执行重命名。 就地操作应该是 Visual Studio 中所有树控件的标准。 提供一个 "重命名" 命令，该命令可立即激活就地编辑模式，其中选定的文本涵盖节点的整个名称，可以接受用户输入。 如果该节点表示文件，则文件名应包含扩展名。 选择突出显示应只包含文件名的正文，而不包含扩展名。

|输入|结果|
|-----------|------------|
|Enter 键|提交重命名操作|
|Esc 键|取消重命名操作|
|单击就地编辑区域外|提交重命名操作|
|撤消|提供轻松的撤消，取消重命名操作|

#### <a name="selection-within-lists-and-grid-controls"></a>列表和网格控件中的选定内容
 列表选择中的关键概念是基于行的，这意味着，当选择进行选择时，整行被选为一个单元。 与此相反，网格可以允许选择特定单元，而不会影响该行的任何其他方面。 网格还可能包含嵌套行的层次结构 (例如在树网格) 中，允许通过与父行交互来选择和取消选择整个层次结构的分支。 列表中的选定内容由简单的突出显示颜色对整行数据显示。 如果所有单元格均为只读) ，则焦点显示为当前可编辑行或单元格 (行的单像素点边框。

> [!NOTE]
> **焦点**和**选择**是不同的概念。 *焦点*是指哪个 UI 元素的目标是接收未显式定向到另一对象的输入，而*选择*是指对象在执行后续操作的一组对象中所包含的状态。

 列表中的选择可能是连续的、不连续的或区域。 当允许多个选择时，应始终支持 "连续" 和 "不连续" 选项，而 "区域 (" 框) 选择是可选的。 通过在列表体的空白区域中拖动来启动区域选择。

| 对象 | 选择  |
|--------|------------|
|  列出  | 系列 |
|  列出  |  相互  |
|  列出  |   区域   |

 在列表上单击 "一次" 将选择在其中发生单击的行。 如果用户在支持就地编辑的列表单元中单击，则还会立即激活单元格进行就地编辑。 否则，将立即选择整行并显示突出显示。

 拖动列表主体会执行以下三个操作之一：

- 如果列表支持区域选择并且鼠标按下了空白，则启动区域选择

- 如果列表单元或行支持作为拖动源，则启动拖/放操作

- 选择当前行

##### <a name="in-place-editing"></a>就地编辑
 允许就地编辑时，有两个基本模型：简单的编辑控件和属性选取器。 使用简单的编辑控件，一旦激活，就会突出显示内容并为用户输入做好准备。 在实现属性选取器的情况下，将激活一次就地编辑模式，并不突出显示当前所选内容。 选取器按钮在单元格中应为右对齐。 有关就地编辑示例，请参阅 "**属性" 窗口**，并在 Visual Studio 中**任务列表**。

##### <a name="keyboard-support"></a>键盘支持
 对于列表和网格中的选择，键盘支持遵循标准的 Windows 约定：

- 箭头键在列表中导航，并在移动焦点时选择每个行/单元。

- Shift + 箭头按箭头键的方向执行连续选择。

- 在从选定内容中添加和删除列表项之间，使用 Ctrl + 箭头后跟空格键会切换，从而造成不连续选择。

- 对于包含嵌套层次结构的网格，向右箭头键将展开一个父行，向左箭头键将折叠一个父行。

- 如果单元格可编辑，则 Tab 键会将焦点移动到当前行中的单元格内。

- Enter 键对列表中的项执行默认命令 (经常**打开**) 。

- F2 键激活当前选定单元格的就地编辑。

## <a name="persistence-and-saving-settings"></a><a name="BKMK_PersistenceAndSavingSettings"></a>持久性和保存设置

### <a name="overview"></a>概述
 尽管 Visual Studio 中的每个软件组件通常负责其自己的状态和持久性，但在某些情况下，Visual Studio 会自动保存设置，如窗口的大小和位置。 下表是自动保存的设置的组合，以及需要执行显式用户或编程操作的设置。

|对象|要保存的内容|何时保存|保存位置|
|------------|------------------|------------------|-------------------|
|可选对象 (例如，一行代码) |代码行上的断点<br /><br /> 与代码行关联的用户快捷方式|保存项目时|项目的**用户选项 ( .suo) **文件|
|对话框|对话框的位置（如果已移动）<br /><br /> 用户上次在对话框中使用的视图|当对话框关闭时<br /><br /> Visual Studio 会话结束时|内存中<br /><br /> **HKEY_Current_User**中的注册表|
|窗口|窗口的大小和位置|当窗口关闭时<br /><br /> Visual Studio 模式更改时<br /><br /> Visual Studio 会话结束时|项目的**用户选项 ( .suo) **文件<br /><br /> 用于窗口设置的自定义选项文件|
|文档|文档中的当前选定内容<br /><br /> 文档视图<br /><br /> 用户访问的最后几个位置|保存文档时|项目的**用户选项 ( .suo) **文件|
|Project|文件引用<br /><br /> 对磁盘上的目录的引用<br /><br /> 对其他软件的引用<br /><br /> 组件<br /><br /> 有关项目本身的状态信息|保存项目时|项目文件|
|解决方案|对项目的引用<br /><br /> 文件引用|保存项目或解决方案时|**解决方案 ( .sln) **文件|
|**工具 > 选项**中的设置|键盘自定义<br /><br /> 工具栏自定义<br /><br /> 配色方案|当 "**工具 > 选项**" 对话框关闭时<br /><br /> Visual Studio 会话结束时|**HKEY_Current_User**中的注册表|

 用户正在执行的操作，决定是在会话期间 (将某个设置保存到内存中，还是在) 会话中将其保存到磁盘上 () ，作为项目或解决方案文件本身的一部分，作为解决方案选项的一部分，作为**解决方案选项 (** 文件的一部分，或作为只有该软件组件了解的自定义设置文件。 上表显示了几个可用于保存设置的事件。 但是，有时您可能需要保存状态：

- 当用户更改对话框或窗口中的位置时

- 当用户将焦点转移到另一个窗口时

- 当用户从 "设计" 切换到 "调试" 模式时

- 当用户注销其帐户时

- 计算机进入休眠或关闭状态时

- 当要重新格式化计算机/硬盘驱动器并再次进行设置时

### <a name="window-configurations"></a>窗口配置
 "窗口配置" 是开发环境的基本表示形式–它是一个方案，其中包含工具窗口的列表以及它们的排列方式。 对于 IDE 管理的 windows (IDE windows) ，每个用户都将保留布局信息，因此，当用户启动 IDE 时，窗口布局的显示方式与上次退出 Visual Studio 时相同。 IDE 窗口的状态和位置以 XML 格式保存在自定义选项文件中。 加载到 IDE 中的包所创建的工具窗口会将其状态信息保存在注册表中，并且每个用户可能具有也可能不存在。

#### <a name="profile-specific-layouts"></a>特定于配置文件的布局
 每个配置文件都包含工具窗口布局，以特定的开发人员角色所熟悉的方式进行组织 (Visual C++ 开发人员希望在 IDE 左侧看到**解决方案资源管理器**，而 c # 开发人员希望看到右侧) 的**解决方案资源管理器**。 配置文件特定的窗口布局会在用户启动时选择配置文件后加载。 包作者应确定最适合其客户体验的窗口布局，知道用户对窗口配置所做的更改随后会被保留。

## <a name="touch-input"></a><a name="BKMK_TouchInput"></a>触摸输入
 用户越来越多地在触控设备上使用 Microsoft 开发产品。 但存在一些障碍，使得难以使用触控设备上的开发工具。 用户将希望我们的产品提供可靠且精确的触摸体验。 这些指南的目的是通知有关合并哪些触摸功能并鼓励跨 Visual Studio 和相关产品的一致触摸体验的决策。

### <a name="levels-of-experience"></a>经验级别
 以下经验级别旨在作为指导，帮助团队根据其所需的触控投资水平来确定要提供哪些触摸功能。

- **基本体验**适用于希望提供触摸功能的团队，使其不会在工作中停止。

- **优化体验**适用于想要提供最常见触摸功能的团队 (例如，internet 浏览器应用程序中通常提供的那些功能) 。

- **提升的体验**适用于想要添加功能（如手势或其他可选功能）的团队，这些功能可使应用程序接触优先。

||基本体验|优化的体验|提升的体验|
|-|----------------------|--------------------------|-------------------------|
|**允许用户 .。。**|修复代码和解决方案/项目级别的读取而不停止结束|执行维护、重构和导航任务|自信地以一致、直观且流畅的方式运行|
|**编辑器**|触摸平移和选择<br /><br /> 用于跳转并按 + 拖动的滚动条|挤压缩放<br /><br /> 快速滚动<br /><br /> 选择<br /><br /> 上下文菜单的简单使用||
|**顶部工具窗口**|列表平移<br /><br /> 项选择<br /><br /> 用于跳转并按 + 拖动的滚动条|轻松地滚动和选择项目||
|**窗口化**||重设窗口大小<br /><br /> 快速访问||
|**记录良好**||在打开的文件之间轻松导航||
|**手势**||确保常见手势跨 IDE 工作|基于手势的操作<br /><br /> 支持拖放和设计器|
|**其他注意事项**|||自定义屏幕键盘|

#### <a name="gestures"></a>手势
 手势为用户提供了可能需要更复杂的交互的命令的快捷方式。 请参阅[适用于桌面应用程序的常见触摸手势](https://msdn.microsoft.com/library/windows/desktop/dd940543\(v=vs.85\).aspx)的 Windows 指导原则，并遵循本指南进行大多数手势，包括平移和缩放等简单手势。
